<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Generate webpage screenshot in Google Chrome browser-like frame mockup.">
  <meta name="keywords" content="webpage screenshot, google chrome browser">
  <meta name="author" content="Heiswayi Nrird">

  <title>Webpage Screenshot Mockup Generator</title>

  <link rel="apple-touch-icon" href="img/apple-touch-icon.png">
  <link rel="icon" href="img/favicon.ico">

  <link rel="stylesheet" type="text/css" href="css/style.css" />

  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body>
  <div class="control">
    <div class="control-center">
      <label>Enter a webpage URL:</label>
      <input type="text" class="input-url" id="inputURL" value="http://">
      <input type="submit" class="input-submit" id="submit" value="Generate Screenshot">
    </div>
    <div class="control-center">
      <label>OR Upload a webpage screenshot image:</label>
      <input type="file" class="input-submit" id="inputFile" multiple>
      <a href="#" class="download-screenshot" id="downloadImage">Download</a>
    </div>
  </div>
  <div class="wrap">
    <div class="chrome-window">
      <label class="url" id="screenshotURL"></label>
      <div id="screenshotWrapper"></div>
    </div>
  </div>

  <script src="js/jquery.min.js"></script>
  <script>
  $(document).ready(function() {
    var inputURL = $('#inputURL').val();
    var inputFile = '';

    $('#inputURL').on("click", function () {
       $(this).select();
    });

    $("#inputURL").change(function() {
        inputURL = $('#inputURL').val();
    });

    $('#submit').click(function() {
      if (isUrlValid(inputURL)) {
        var encodedURI = encodeURI('http://s.wordpress.com/mshots/v1/' + inputURL + '?w=1200');
        $('#screenshotWrapper').html('<img class="screenshot" id="screenshotImage" src="' + encodedURI + '" alt="Screenshot Placeholder">');
        $('#screenshotURL').text(encodeURI(inputURL));
      } else {
        alert('Invalid URL!');
      }
    });
  });

  function isUrlValid(url) {
      return /^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(url);
  }

  function renderImage(file) {
    var reader = new FileReader();
    reader.onload = function(event) {
      inputFile = event.target.result;
      $('#screenshotURL').html('');
      $('#screenshotWrapper').html('<img class="screenshot" id="screenshotImage" src="' + inputFile + '" alt="Screenshot Placeholder">');
    }
    reader.readAsDataURL(file);
  }

  $('#inputFile').change(function() {
    renderImage(this.files[0]);
  });
  </script>
</body>
</html>
